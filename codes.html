<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Scratchlet - Redeem Codes</title>
<link href="https://fonts.googleapis.com/css2?family=Titan+One&display=swap" rel="stylesheet">
<link rel="shortcut icon" href="https://i.postimg.cc/Wbsrt82t/Scratchlet-Icon.png">
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
<style>
* {margin:0; padding:0; box-sizing:border-box;}
body {
    font-family: "Nunito", sans-serif;
    background: linear-gradient(rgba(210,180,140,0.15) 1px, transparent 1px),
                linear-gradient(90deg,rgba(210,180,140,0.15) 1px, transparent 1px),
                linear-gradient(135deg,#FF8C00 0%,#FFA500 100%);
    background-size: 40px 40px;
    padding: 20px;
    min-height: 100vh;
    color: white;
}

.header {display:flex; justify-content:space-between; align-items:center; padding:20px; background:rgba(255,255,255,0.1); border-radius:15px; backdrop-filter:blur(10px); border:2px solid rgba(255,255,255,0.2); margin-bottom:30px;}
.logo-text {font-family:"Titan One",sans-serif; font-size:2.5em; color:#fff; text-shadow:2px 2px 4px rgba(0,0,0,0.3);}
.nav-buttons {display:flex; gap:12px;}
.nav-btn {background: rgba(255,255,255,0.9); color: #FF8C00; padding: 10px 20px; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; text-decoration:none; transition: all 0.3s ease; box-shadow:0 4px 12px rgba(0,0,0,0.2);}
.nav-btn:hover {background:white; transform:translateY(-2px); box-shadow:0 6px 18px rgba(0,0,0,0.3);}

.codes-container {width:100%; max-width:900px; margin:0 auto; padding:20px; text-align:center;}
.codes-title {font-family:"Titan One"; font-size:3em; color:#fff; text-shadow:3px 3px 6px rgba(0,0,0,0.3); margin-bottom:20px;}

.user-info-row {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    margin: 30px 0;
    flex-wrap: wrap;
}

.user-info {
    background: rgba(255,255,255,0.1);
    padding: 15px 25px;
    border-radius: 15px;
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255,255,255,0.2);
    min-width: 180px;
    text-align: center;
}

.redeem-section {
    background: rgba(255,255,255,0.15);
    border-radius: 20px;
    padding: 30px;
    margin: 30px auto;
    max-width: 500px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
    backdrop-filter: blur(10px);
    border: 3px solid rgba(255,255,255,0.3);
}

.code-input-container {
    margin: 25px 0;
    position: relative;
}

.code-input {
    width: 100%;
    padding: 18px 25px;
    font-size: 1.2em;
    border: 3px solid rgba(255,255,255,0.4);
    border-radius: 15px;
    background: rgba(255,255,255,0.9);
    color: #333;
    font-weight: bold;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 2px;
    transition: all 0.3s ease;
}

.code-input:focus {
    outline: none;
    border-color: #FF8C00;
    box-shadow: 0 0 15px rgba(255,140,0,0.4);
    transform: translateY(-2px);
}

.code-input::placeholder {
    color: rgba(0,0,0,0.4);
    letter-spacing: 1px;
}

.redeem-btn {
    width: 100%;
    padding: 18px;
    background: linear-gradient(135deg, #FF8C00 0%, #FFA500 100%);
    color: white;
    border: none;
    border-radius: 15px;
    font-size: 1.3em;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 6px 15px rgba(255,140,0,0.3);
    margin-top: 15px;
    font-family: 'Titan One', cursive;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.redeem-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(255,140,0,0.4);
    background: linear-gradient(135deg, #FF9B30 0%, #FFB347 100%);
}

.redeem-btn:active {
    transform: translateY(-1px);
}

.redeem-btn:disabled {
    background: rgba(169,169,169,0.6);
    color: rgba(255,255,255,0.7);
    cursor: not-allowed;
    transform: none;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

/* Modal Styling */
.overlay {position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:2000; opacity:0; pointer-events:none; transition:opacity 0.3s ease; backdrop-filter:blur(5px);}
.overlay.active {opacity:1; pointer-events:all;}
.modal {
    position:fixed;
    top:50%; left:50%;
    transform:translate(-50%,-50%) scale(0.8);
    background: linear-gradient(135deg,#fff8dc,#ffffff);
    border:3px solid #FF8C00;
    border-radius:20px;
    box-shadow:0 20px 40px rgba(0,0,0,0.4);
    padding:40px;
    z-index:2002;
    display:none;
    flex-direction:column;
    align-items:center;
    gap:20px;
    min-width:350px;
    text-align:center;
    animation: popIn 0.3s ease forwards;
}
@keyframes popIn {
    from {transform:translate(-50%,-50%) scale(0.8); opacity:0;}
    to {transform:translate(-50%,-50%) scale(1); opacity:1;}
}
.modal h2 {
    font-family:'Titan One';
    font-size:2.2em;
    margin:0;
    color:#FF8C00;
    text-shadow:1px 1px 2px rgba(0,0,0,0.2);
}
.modal p {
    margin:0;
    font-size:1.2em;
    color:#333;
    line-height:1.5;
}
.modal-buttons {
    display:flex;
    gap:15px;
    margin-top:10px;
}
.modal-btn {
    padding:12px 30px;
    border:none;
    border-radius:15px;
    cursor:pointer;
    font-weight:700;
    font-size:1em;
    transition:all 0.3s ease;
    min-width:120px;
}
.modal-btn.primary {
    background:#FF8C00;
    color:white;
}
.modal-btn.secondary {
    background:rgba(255,255,255,0.9);
    color:#FF8C00;
    border:2px solid #FF8C00;
}
.modal-btn:hover {
    transform:translateY(-2px);
    box-shadow:0 6px 15px rgba(0,0,0,0.2);
}

.reward-animation {
    font-size: 3em;
    margin: 10px 0;
    animation: bounce 1s ease infinite;
}

@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
}

.coin-animation {
    position: fixed;
    z-index: 9999;
    user-select: none;
    pointer-events: none;
    font-size: 24px;
}

.footer {
    text-align:center;
    margin-top:50px;
    padding:20px;
    color:rgba(255,255,255,0.7);
    font-size:0.9em;
}

/* Hidden instruction section */
.hidden-instruction {
    background: rgba(255,255,255,0.1);
    border-radius: 15px;
    padding: 20px;
    margin-top: 40px;
    backdrop-filter: blur(5px);
    border: 2px solid rgba(255,255,255,0.2);
    font-style: italic;
    color: rgba(255,255,255,0.8);
}

.hidden-instruction h3 {
    color: #FFD700;
    margin-bottom: 10px;
    font-family: 'Titan One', cursive;
}

@media (max-width:768px){
    .header{flex-direction:column;gap:15px;text-align:center;}
    .nav-buttons{flex-wrap:wrap;justify-content:center;}
    .codes-title{font-size:2.2em;}
    .modal-buttons{flex-direction:column;}
    .modal {
        min-width: 300px;
        padding: 30px 20px;
    }
}
</style>
</head>
<body>
<div class="header">
    <div class="logo"><div class="logo-text">Scratchlet</div></div>
    <div class="nav-buttons">
        <a href="home.html" class="nav-btn">üè† Home</a>
        <a href="market.html" class="nav-btn">üõí Market</a>
        <a href="stats.html" class="nav-btn">üìä Stats</a>
        <a href="friends.html" class="nav-btn">üë• Friends</a>
        <a href="blooks.html" class="nav-btn">üò∫ Blooks</a>
        <button class="nav-btn" onclick="logout()" style="background:rgba(255,0,0,0.3);color:white;">üö™ Logout</button>
    </div>
</div>

<div class="codes-container">
    <h1 class="codes-title">Redeem Codes</h1>
    
    <div class="user-info-row">
        <div class="user-info">
            <strong>Coins:</strong> <span id="userCoins">1000</span>
        </div>
        <div class="user-info">
            <strong>Codes Redeemed:</strong> <span id="codesRedeemed">0</span>
        </div>
    </div>
    
    <div class="redeem-section">
        <h2>Enter Code</h2>
        <p style="margin-bottom: 20px; color: rgba(255,255,255,0.9);">
            Enter codes to receive special rewards!
        </p>
        <div class="code-input-container">
            <input type="text" class="code-input" id="codeInput" placeholder="ENTER CODE HERE" maxlength="20">
        </div>
        <button class="redeem-btn" id="redeemBtn" onclick="redeemCode()">
            üéÅ REDEEM CODE
        </button>
    </div>
    
    <div class="hidden-instruction">
        <h3>üí° How to Find Codes</h3>
        <p>Codes are hidden throughout the game and released during special events. Follow our social media and check announcements for new codes!</p>
    </div>
</div>

<!-- Modal for messages -->
<div class="overlay" id="overlay"></div>
<div class="modal" id="messageModal">
    <h2 id="modalTitle">Success!</h2>
    <div id="modalContent">
        <p id="modalMessage">Code redeemed successfully!</p>
        <div id="rewardAnimation" class="reward-animation" style="display:none;">üí∞</div>
    </div>
    <div class="modal-buttons">
        <button class="modal-btn primary" id="modalOkBtn">OK</button>
    </div>
</div>

<div class="footer">
    <p>Scratchlet ¬© 2024 ‚Ä¢ The Ultimate Blooket Remix Experience</p>
</div>

<script>
// ==================== USER DATA ====================
function initUserData() {
    if (!localStorage.getItem('userData')) {
        localStorage.setItem('userData', JSON.stringify({
            username: "SuperMemes_64",
            coins: 1000,
            unlockedBlooks: [],
            blookCounts: {},
            totalPacksOpened: 0,
            redeemedCodes: [],
            codesRedeemed: 0
        }));
    }
    return JSON.parse(localStorage.getItem('userData'));
}

function loadUserData() {
    const data = initUserData();
    document.getElementById('userCoins').textContent = data.coins;
    document.getElementById('codesRedeemed').textContent = data.codesRedeemed || 0;
    return data;
}

function saveUserData(data) {
    localStorage.setItem('userData', JSON.stringify(data));
}

function logout() {
    localStorage.clear();
    location.reload();
}

// ==================== CODES SYSTEM ====================
// Define all available codes (HIDDEN FROM USERS)
const availableCodes = {
    "RELEASE": {
        reward: { coins: 500, message: "üéâ Thanks for being an early user! Here's 500 coins!" },
        isActive: true,
        maxUses: 1,
        description: "Release celebration code"
    },
    "CHRISTMAS2025": {
        reward: { coins: 1000, message: "üéÑ Merry Christmas 2025! Enjoy 1000 coins!" },
        isActive: true,
        maxUses: 1,
        description: "Christmas 2025 special"
    },
    "SCRATCHLET": {
        reward: { coins: 250, message: "üåü Welcome to Scratchlet! Here's 250 coins to get started!" },
        isActive: true,
        maxUses: 1,
        description: "Welcome code"
    },
    "NEWYEAR2025": {
        reward: { coins: 750, message: "üéä Happy New Year 2025! Enjoy 750 coins!" },
        isActive: true,
        maxUses: 1,
        description: "New Year 2025 celebration"
    },
    "GOLDEN": {
        reward: { coins: 1500, message: "üèÜ GOLDEN code activated! 1500 coins for you!" },
        isActive: true,
        maxUses: 1,
        description: "Special golden reward"
    },
    "SCRATCH": {
        reward: { coins: 300, message: "üò∫ Scratch the surface! 300 coins for you!" },
        isActive: true,
        maxUses: 1,
        description: "Scratch themed code"
    }
};

// Initialize redeemed codes in localStorage
function initRedeemedCodes() {
    if (!localStorage.getItem('redeemedCodes')) {
        localStorage.setItem('redeemedCodes', JSON.stringify([]));
    }
    if (!localStorage.getItem('codeUses')) {
        localStorage.setItem('codeUses', JSON.stringify({}));
    }
}

// Get redeemed codes
function getRedeemedCodes() {
    initRedeemedCodes();
    return JSON.parse(localStorage.getItem('redeemedCodes')) || [];
}

// Get code uses count
function getCodeUses() {
    initRedeemedCodes();
    return JSON.parse(localStorage.getItem('codeUses')) || {};
}

// Save code uses
function saveCodeUses(uses) {
    localStorage.setItem('codeUses', JSON.stringify(uses));
}

// Check if code can be redeemed
function canRedeemCode(code) {
    const redeemed = getRedeemedCodes();
    const codeUses = getCodeUses();
    
    // Check if code exists
    if (!availableCodes[code]) {
        return { canRedeem: false, reason: "‚ùå Invalid code!" };
    }
    
    // Check if code is active
    if (!availableCodes[code].isActive) {
        return { canRedeem: false, reason: "‚è∞ This code has expired!" };
    }
    
    // Check if user has already redeemed this code
    if (redeemed.includes(code)) {
        return { canRedeem: false, reason: "‚úÖ You've already redeemed this code!" };
    }
    
    // Check max uses
    const uses = codeUses[code] || 0;
    if (uses >= availableCodes[code].maxUses) {
        return { canRedeem: false, reason: "üö´ This code has reached its usage limit!" };
    }
    
    return { canRedeem: true, reason: "" };
}

// Redeem a code
function redeemCode() {
    const codeInput = document.getElementById('codeInput');
    const code = codeInput.value.trim().toUpperCase();
    
    if (!code) {
        showModal("Enter a Code", "Please enter a code to redeem!", false);
        return;
    }
    
    // Check if code can be redeemed
    const check = canRedeemCode(code);
    if (!check.canRedeem) {
        showModal("Cannot Redeem", check.reason, false);
        return;
    }
    
    // Get the reward
    const reward = availableCodes[code].reward;
    
    // Update user data
    const userData = loadUserData();
    userData.coins += reward.coins;
    userData.redeemedCodes = userData.redeemedCodes || [];
    userData.redeemedCodes.push(code);
    userData.codesRedeemed = (userData.codesRedeemed || 0) + 1;
    saveUserData(userData);
    
    // Update redeemed codes list
    const redeemed = getRedeemedCodes();
    redeemed.push(code);
    localStorage.setItem('redeemedCodes', JSON.stringify(redeemed));
    
    // Update code uses
    const codeUses = getCodeUses();
    codeUses[code] = (codeUses[code] || 0) + 1;
    saveCodeUses(codeUses);
    
    // Show success animation
    showModal("Code Redeemed! üéâ", reward.message, true, reward.coins);
    
    // Update UI
    loadUserData();
    
    // Clear input
    codeInput.value = "";
}

// Create coin animation
function createCoinAnimation(count = 15) {
    for (let i = 0; i < count; i++) {
        setTimeout(() => {
            const coin = document.createElement('div');
            coin.innerHTML = 'üí∞';
            coin.className = 'coin-animation';
            coin.style.left = `${Math.random() * window.innerWidth}px`;
            coin.style.top = '-50px';
            document.body.appendChild(coin);
            
            const duration = 1000 + Math.random() * 1000;
            const endY = window.innerHeight + 50;
            
            const animation = coin.animate([
                { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                { transform: `translateY(${endY}px) rotate(360deg)`, opacity: 0 }
            ], { duration: duration, easing: 'cubic-bezier(0.215, 0.61, 0.355, 1)' });
            
            animation.onfinish = () => coin.remove();
        }, i * 100);
    }
}

// Show modal
function showModal(title, message, isSuccess, coins = 0) {
    const modal = document.getElementById('messageModal');
    const overlay = document.getElementById('overlay');
    const modalTitle = document.getElementById('modalTitle');
    const modalMessage = document.getElementById('modalMessage');
    const rewardAnimation = document.getElementById('rewardAnimation');
    const modalOkBtn = document.getElementById('modalOkBtn');
    
    modalTitle.textContent = title;
    modalMessage.textContent = message;
    
    if (isSuccess && coins > 0) {
        rewardAnimation.style.display = 'block';
        rewardAnimation.innerHTML = `+${coins} coins!`;
        createCoinAnimation();
    } else {
        rewardAnimation.style.display = 'none';
    }
    
    modal.style.display = 'flex';
    overlay.classList.add('active');
    
    modalOkBtn.onclick = function() {
        modal.style.display = 'none';
        overlay.classList.remove('active');
    };
    
    // Auto-close after 5 seconds for success messages
    if (isSuccess) {
        setTimeout(() => {
            if (modal.style.display === 'flex') {
                modal.style.display = 'none';
                overlay.classList.remove('active');
            }
        }, 5000);
    }
}

// Show hint for valid codes (for debugging/development)
function showCodeHint() {
    const hints = [
        "Try codes related to holidays...",
        "What's the current year?",
        "Look for codes in announcements!",
        "Check our social media for codes!",
        "Some codes are time-limited!"
    ];
    
    const randomHint = hints[Math.floor(Math.random() * hints.length)];
    
    // Only show hint occasionally (33% chance)
    if (Math.random() < 0.33) {
        const hintElement = document.createElement('div');
        hintElement.style.cssText = `
            background: rgba(255,215,0,0.2);
            border: 2px dashed gold;
            border-radius: 10px;
            padding: 10px;
            margin: 20px auto;
            max-width: 500px;
            color: #FFD700;
            font-style: italic;
        `;
        hintElement.innerHTML = `üí° Hint: ${randomHint}`;
        
        const container = document.querySelector('.codes-container');
        const existingHint = container.querySelector('.code-hint');
        if (existingHint) {
            existingHint.remove();
        }
        
        hintElement.className = 'code-hint';
        container.appendChild(hintElement);
        
        // Remove hint after 10 seconds
        setTimeout(() => {
            if (hintElement.parentNode) {
                hintElement.remove();
            }
        }, 10000);
    }
}

// Initialize everything
document.addEventListener('DOMContentLoaded', function() {
    // Initialize user data
    initUserData();
    loadUserData();
    
    // Initialize redeemed codes
    initRedeemedCodes();
    
    // Make enter key work for redeeming codes
    const codeInput = document.getElementById('codeInput');
    codeInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            redeemCode();
        }
    });
    
    // Show hint on input focus
    codeInput.addEventListener('focus', showCodeHint);
    
    // Add click sound effect (optional)
    const buttons = document.querySelectorAll('button, .nav-btn');
    buttons.forEach(button => {
        button.addEventListener('click', function() {
            // Optional: Add sound effect here
            // new Audio('click-sound.mp3').play();
        });
    });
    
    // Add some visual flair to the input on page load
    setTimeout(() => {
        codeInput.focus();
        codeInput.style.transform = 'scale(1.02)';
        codeInput.style.boxShadow = '0 0 20px rgba(255,140,0,0.5)';
        
        setTimeout(() => {
            codeInput.style.transform = '';
            codeInput.style.boxShadow = '';
        }, 1000);
    }, 500);
});

// ==================== ADD MORE CODES HERE ====================
// To add more codes, simply add them to the availableCodes object:
// "CODE_NAME": {
//     reward: { coins: AMOUNT, message: "MESSAGE" },
//     isActive: true,
//     maxUses: 1,
//     description: "DESCRIPTION"
// }
</script>
</body>
</html>
